<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Praktikum 21 Ruumiandmete analüüs R-iga 2 | HVHV.00.001 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes</title>
  <meta name="description" content="Praktikum 21 Ruumiandmete analüüs R-iga 2 | HVHV.00.001 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Praktikum 21 Ruumiandmete analüüs R-iga 2 | HVHV.00.001 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Praktikum 21 Ruumiandmete analüüs R-iga 2 | HVHV.00.001 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes" />
  
  
  

<meta name="author" content="Andres Kimber, Maarja-Liisa Pilvik" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r.html"/>
<link rel="next" href="kirjandus.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Sissejuhatus</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#kursuse-korraldusest"><i class="fa fa-check"></i><b>1.1</b> Kursuse korraldusest</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#mis-on-geoinfosüsteemid"><i class="fa fa-check"></i><b>1.2</b> Mis on geoinfosüsteemid?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#geoinfosüsteemide-ajaloost"><i class="fa fa-check"></i><b>1.3</b> Geoinfosüsteemide ajaloost</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#ruumiandmed-ja-gis-humanitaarteadustes"><i class="fa fa-check"></i><b>1.4</b> Ruumiandmed ja GIS humanitaarteadustes</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#arheoloogia"><i class="fa fa-check"></i><b>1.4.1</b> Arheoloogia</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#veel-näiteid"><i class="fa fa-check"></i><b>1.4.2</b> Veel näiteid</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#küsitlus"><i class="fa fa-check"></i><b>1.5</b> Küsitlus</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#järgmisel-korral"><i class="fa fa-check"></i><b>1.6</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="seminar.html"><a href="seminar.html"><i class="fa fa-check"></i><b>2</b> Seminar</a>
<ul>
<li class="chapter" data-level="2.1" data-path="seminar.html"><a href="seminar.html#mõisted"><i class="fa fa-check"></i><b>2.1</b> Mõisted</a></li>
<li class="chapter" data-level="2.2" data-path="seminar.html"><a href="seminar.html#rühmatöö-1-gisi-ja-ruumi-geohumanitaaria-projekte-ja-rakendusi"><i class="fa fa-check"></i><b>2.2</b> Rühmatöö 1: GISi ja ruumi-/geohumanitaaria projekte ja rakendusi</a></li>
<li class="chapter" data-level="2.3" data-path="seminar.html"><a href="seminar.html#rühmatöö-2-humanitaaria-vs.-kvantitatiivsed-meetodid"><i class="fa fa-check"></i><b>2.3</b> Rühmatöö 2: humanitaaria vs. kvantitatiivsed meetodid</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ruumiobjektid.html"><a href="ruumiobjektid.html"><i class="fa fa-check"></i><b>3</b> Ruumiobjektid ja ruumiandmed</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ruumiobjektid.html"><a href="ruumiobjektid.html#vektorandmed"><i class="fa fa-check"></i><b>3.1</b> Vektorandmed</a></li>
<li class="chapter" data-level="3.2" data-path="ruumiobjektid.html"><a href="ruumiobjektid.html#rasterandmed"><i class="fa fa-check"></i><b>3.2</b> Rasterandmed</a></li>
<li class="chapter" data-level="3.3" data-path="ruumiobjektid.html"><a href="ruumiobjektid.html#vektor-vs.-raster"><i class="fa fa-check"></i><b>3.3</b> Vektor vs. raster</a></li>
<li class="chapter" data-level="3.4" data-path="ruumiobjektid.html"><a href="ruumiobjektid.html#ülesanne"><i class="fa fa-check"></i><b>3.4</b> Ülesanne</a></li>
<li class="chapter" data-level="3.5" data-path="ruumiobjektid.html"><a href="ruumiobjektid.html#järgmisel-korral-1"><i class="fa fa-check"></i><b>3.5</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="kaardirakendused.html"><a href="kaardirakendused.html"><i class="fa fa-check"></i><b>4</b> Kaardirakendused</a>
<ul>
<li class="chapter" data-level="4.1" data-path="kaardirakendused.html"><a href="kaardirakendused.html#kaart"><i class="fa fa-check"></i><b>4.1</b> Kaart</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="kaardirakendused.html"><a href="kaardirakendused.html#koordinaatsüsteemid-ja-projektsioonid"><i class="fa fa-check"></i><b>4.1.1</b> Koordinaatsüsteemid ja projektsioonid</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="kaardirakendused.html"><a href="kaardirakendused.html#veebipõhised-kaardirakendused"><i class="fa fa-check"></i><b>4.2</b> Veebipõhised kaardirakendused</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="kaardirakendused.html"><a href="kaardirakendused.html#google-my-maps"><i class="fa fa-check"></i><b>4.2.1</b> Google My Maps</a></li>
<li class="chapter" data-level="4.2.2" data-path="kaardirakendused.html"><a href="kaardirakendused.html#ülesanne-1"><i class="fa fa-check"></i><b>4.2.2</b> Ülesanne</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="kaardirakendused.html"><a href="kaardirakendused.html#järgmisel-korral-2"><i class="fa fa-check"></i><b>4.3</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="storymaps.html"><a href="storymaps.html"><i class="fa fa-check"></i><b>5</b> Story maps</a>
<ul>
<li class="chapter" data-level="5.1" data-path="storymaps.html"><a href="storymaps.html#story-maps"><i class="fa fa-check"></i><b>5.1</b> Story maps</a></li>
<li class="chapter" data-level="5.2" data-path="storymaps.html"><a href="storymaps.html#mapbox-studio"><i class="fa fa-check"></i><b>5.2</b> Mapbox Studio</a></li>
<li class="chapter" data-level="5.3" data-path="storymaps.html"><a href="storymaps.html#mapbox-story-mapis"><i class="fa fa-check"></i><b>5.3</b> Mapbox <em>story map</em>’is</a></li>
<li class="chapter" data-level="5.4" data-path="storymaps.html"><a href="storymaps.html#järgmisel-korral-3"><i class="fa fa-check"></i><b>5.4</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="qgis-1.html"><a href="qgis-1.html"><i class="fa fa-check"></i><b>6</b> Sissejuhatus QGISi</a>
<ul>
<li class="chapter" data-level="6.1" data-path="qgis-1.html"><a href="qgis-1.html#installimine"><i class="fa fa-check"></i><b>6.1</b> Installimine</a></li>
<li class="chapter" data-level="6.2" data-path="qgis-1.html"><a href="qgis-1.html#andmed-ja-failihaldus"><i class="fa fa-check"></i><b>6.2</b> Andmed ja failihaldus</a></li>
<li class="chapter" data-level="6.3" data-path="qgis-1.html"><a href="qgis-1.html#esimene-seadistamine-ja-kasutajaliides"><i class="fa fa-check"></i><b>6.3</b> Esimene seadistamine ja kasutajaliides</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="qgis-1.html"><a href="qgis-1.html#vaikimisi-koordinaatsüsteemi-sätestamine."><i class="fa fa-check"></i><b>6.3.1</b> Vaikimisi koordinaatsüsteemi sätestamine.</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="qgis-1.html"><a href="qgis-1.html#andmete-avamine"><i class="fa fa-check"></i><b>6.4</b> Andmete avamine</a></li>
<li class="chapter" data-level="6.5" data-path="qgis-1.html"><a href="qgis-1.html#kihtide-visualiseerimine"><i class="fa fa-check"></i><b>6.5</b> Kihtide visualiseerimine</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="qgis-1.html"><a href="qgis-1.html#harjutus-1"><i class="fa fa-check"></i><b>6.5.1</b> Harjutus 1</a></li>
<li class="chapter" data-level="6.5.2" data-path="qgis-1.html"><a href="qgis-1.html#harjutus-2"><i class="fa fa-check"></i><b>6.5.2</b> Harjutus 2</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="qgis-1.html"><a href="qgis-1.html#aluskaardid"><i class="fa fa-check"></i><b>6.6</b> Aluskaardid</a></li>
<li class="chapter" data-level="6.7" data-path="qgis-1.html"><a href="qgis-1.html#järgmisel-korral-4"><i class="fa fa-check"></i><b>6.7</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="qgis-2.html"><a href="qgis-2.html"><i class="fa fa-check"></i><b>7</b> Sissejuhatus QGISi 2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="qgis-2.html"><a href="qgis-2.html#andmete-avamine-1"><i class="fa fa-check"></i><b>7.1</b> Andmete avamine</a></li>
<li class="chapter" data-level="7.2" data-path="qgis-2.html"><a href="qgis-2.html#andmete-valimine-ja-mõõtmine-käsitsi"><i class="fa fa-check"></i><b>7.2</b> Andmete valimine ja mõõtmine (käsitsi)</a></li>
<li class="chapter" data-level="7.3" data-path="qgis-2.html"><a href="qgis-2.html#kihi-ja-andmete-loomine"><i class="fa fa-check"></i><b>7.3</b> Kihi ja andmete loomine</a></li>
<li class="chapter" data-level="7.4" data-path="qgis-2.html"><a href="qgis-2.html#kaartide-kujundamine-ja-eksportimine"><i class="fa fa-check"></i><b>7.4</b> Kaartide kujundamine ja eksportimine</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="avaandmed.html"><a href="avaandmed.html"><i class="fa fa-check"></i><b>8</b> Avaandmed ja repositooriumid</a>
<ul>
<li class="chapter" data-level="8.1" data-path="avaandmed.html"><a href="avaandmed.html#mis-on-avaandmed"><i class="fa fa-check"></i><b>8.1</b> Mis on avaandmed?</a></li>
<li class="chapter" data-level="8.2" data-path="avaandmed.html"><a href="avaandmed.html#eesti-ruumiandmed"><i class="fa fa-check"></i><b>8.2</b> Eesti ruumiandmed</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="avaandmed.html"><a href="avaandmed.html#maa-ameti-geoportaal"><i class="fa fa-check"></i><b>8.2.1</b> Maa-ameti Geoportaal</a></li>
<li class="chapter" data-level="8.2.2" data-path="avaandmed.html"><a href="avaandmed.html#statistikaamet"><i class="fa fa-check"></i><b>8.2.2</b> Statistikaamet</a></li>
<li class="chapter" data-level="8.2.3" data-path="avaandmed.html"><a href="avaandmed.html#digitaalsed-kaardikollektsioonid"><i class="fa fa-check"></i><b>8.2.3</b> Digitaalsed kaardikollektsioonid</a></li>
<li class="chapter" data-level="8.2.4" data-path="avaandmed.html"><a href="avaandmed.html#muu"><i class="fa fa-check"></i><b>8.2.4</b> Muu</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="avaandmed.html"><a href="avaandmed.html#muude-riikide-ruumiandmed"><i class="fa fa-check"></i><b>8.3</b> Muude riikide ruumiandmed</a></li>
<li class="chapter" data-level="8.4" data-path="avaandmed.html"><a href="avaandmed.html#järgmisel-korral-5"><i class="fa fa-check"></i><b>8.4</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="avaandmed2.html"><a href="avaandmed2.html"><i class="fa fa-check"></i><b>9</b> Avaandmed ja repositooriumid 2</a>
<ul>
<li class="chapter" data-level="9.1" data-path="avaandmed2.html"><a href="avaandmed2.html#andmestike-ühendamine"><i class="fa fa-check"></i><b>9.1</b> Andmestike ühendamine</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="avaandmed2.html"><a href="avaandmed2.html#csv-info-ühendamine-shp-ga"><i class="fa fa-check"></i><b>9.1.1</b> CSV info ühendamine SHP-ga</a></li>
<li class="chapter" data-level="9.1.2" data-path="avaandmed2.html"><a href="avaandmed2.html#shp-info-ühendamine-csv-ga"><i class="fa fa-check"></i><b>9.1.2</b> SHP info ühendamine CSV-ga</a></li>
<li class="chapter" data-level="9.1.3" data-path="avaandmed2.html"><a href="avaandmed2.html#csv-ja-shp-ühendamine-polügoonidega-vektorandmeteks"><i class="fa fa-check"></i><b>9.1.3</b> CSV ja SHP ühendamine polügoonidega vektorandmeteks</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="avaandmed2.html"><a href="avaandmed2.html#geokodeerimine"><i class="fa fa-check"></i><b>9.2</b> Geokodeerimine</a></li>
<li class="chapter" data-level="9.3" data-path="avaandmed2.html"><a href="avaandmed2.html#ruumiandmete-omavahel-ühendamine"><i class="fa fa-check"></i><b>9.3</b> Ruumiandmete omavahel ühendamine</a></li>
<li class="chapter" data-level="9.4" data-path="avaandmed2.html"><a href="avaandmed2.html#ruumiandmete-käsitsi-lisamine"><i class="fa fa-check"></i><b>9.4</b> Ruumiandmete käsitsi lisamine</a></li>
<li class="chapter" data-level="9.5" data-path="avaandmed2.html"><a href="avaandmed2.html#järgmisel-korral-6"><i class="fa fa-check"></i><b>9.5</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="georefereerimine.html"><a href="georefereerimine.html"><i class="fa fa-check"></i><b>10</b> Georefereerimine</a>
<ul>
<li class="chapter" data-level="10.1" data-path="georefereerimine.html"><a href="georefereerimine.html#kaartide-otsimine-ja-allalaadimine"><i class="fa fa-check"></i><b>10.1</b> Kaartide otsimine ja allalaadimine</a></li>
<li class="chapter" data-level="10.2" data-path="georefereerimine.html"><a href="georefereerimine.html#georefereerimine-1"><i class="fa fa-check"></i><b>10.2</b> Georefereerimine</a></li>
<li class="chapter" data-level="10.3" data-path="georefereerimine.html"><a href="georefereerimine.html#lõikamine"><i class="fa fa-check"></i><b>10.3</b> Lõikamine</a></li>
<li class="chapter" data-level="10.4" data-path="georefereerimine.html"><a href="georefereerimine.html#ülesanne-2"><i class="fa fa-check"></i><b>10.4</b> Ülesanne</a></li>
<li class="chapter" data-level="10.5" data-path="georefereerimine.html"><a href="georefereerimine.html#digiteerimine"><i class="fa fa-check"></i><b>10.5</b> Digiteerimine</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="georefereerimine.html"><a href="georefereerimine.html#veebilahendus"><i class="fa fa-check"></i><b>10.5.1</b> Veebilahendus</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="georefereerimine.html"><a href="georefereerimine.html#ülesanne-3"><i class="fa fa-check"></i><b>10.6</b> Ülesanne</a></li>
<li class="chapter" data-level="10.7" data-path="georefereerimine.html"><a href="georefereerimine.html#järgmisel-korral-7"><i class="fa fa-check"></i><b>10.7</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="visualiseerimine1.html"><a href="visualiseerimine1.html"><i class="fa fa-check"></i><b>11</b> Ruumiandmete visualiseerimine</a>
<ul>
<li class="chapter" data-level="11.1" data-path="visualiseerimine1.html"><a href="visualiseerimine1.html#avaldised"><i class="fa fa-check"></i><b>11.1</b> Avaldised</a></li>
<li class="chapter" data-level="11.2" data-path="visualiseerimine1.html"><a href="visualiseerimine1.html#ülesanne-1-ei-olepole-suhtelised-sagedused"><i class="fa fa-check"></i><b>11.2</b> Ülesanne 1: “ei ole”/“pole” suhtelised sagedused</a></li>
<li class="chapter" data-level="11.3" data-path="visualiseerimine1.html"><a href="visualiseerimine1.html#ülesanne-2-ei-olepole-selged-eelistused"><i class="fa fa-check"></i><b>11.3</b> Ülesanne 2: “ei ole”/“pole” selged eelistused</a></li>
<li class="chapter" data-level="11.4" data-path="visualiseerimine1.html"><a href="visualiseerimine1.html#ülesanne-3-tekstiatribuutide-muutmine"><i class="fa fa-check"></i><b>11.4</b> Ülesanne 3: tekstiatribuutide muutmine</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualiseerimine2.html"><a href="visualiseerimine2.html"><i class="fa fa-check"></i><b>12</b> Ruumiandmete visualiseerimine 2</a>
<ul>
<li class="chapter" data-level="12.1" data-path="visualiseerimine2.html"><a href="visualiseerimine2.html#ülesanne-1-ei-olepole-levikuandmed"><i class="fa fa-check"></i><b>12.1</b> Ülesanne 1: “ei ole”/“pole” levikuandmed</a></li>
<li class="chapter" data-level="12.2" data-path="visualiseerimine2.html"><a href="visualiseerimine2.html#ülesanne-2-kaardi-salvestamine"><i class="fa fa-check"></i><b>12.2</b> Ülesanne 2: kaardi salvestamine</a></li>
<li class="chapter" data-level="12.3" data-path="visualiseerimine2.html"><a href="visualiseerimine2.html#ülesanne-3-abielud-ja-lahutused"><i class="fa fa-check"></i><b>12.3</b> Ülesanne 3: abielud ja lahutused</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="visualiseerimine2.html"><a href="visualiseerimine2.html#aasta-jaanuari-abielude-ja-lahutuste-suhe"><i class="fa fa-check"></i><b>12.3.1</b> 2019. aasta jaanuari abielude ja lahutuste suhe</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="visualiseerimine2.html"><a href="visualiseerimine2.html#andmebaasid"><i class="fa fa-check"></i><b>12.4</b> Andmebaasid</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="visualiseerimine3.html"><a href="visualiseerimine3.html"><i class="fa fa-check"></i><b>13</b> Ruumiandmete visualiseerimine 3</a>
<ul>
<li class="chapter" data-level="13.1" data-path="visualiseerimine3.html"><a href="visualiseerimine3.html#värvidest"><i class="fa fa-check"></i><b>13.1</b> Värvidest</a></li>
<li class="chapter" data-level="13.2" data-path="visualiseerimine3.html"><a href="visualiseerimine3.html#visualiseerimine"><i class="fa fa-check"></i><b>13.2</b> Visualiseerimine</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="visualiseerimine3.html"><a href="visualiseerimine3.html#sildid"><i class="fa fa-check"></i><b>13.2.1</b> Sildid</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="visualiseerimine3.html"><a href="visualiseerimine3.html#kaardi-tegemine"><i class="fa fa-check"></i><b>13.3</b> Kaardi tegemine</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="visualiseerimine4.html"><a href="visualiseerimine4.html"><i class="fa fa-check"></i><b>14</b> Ruumiandmete visualiseerimine 4</a>
<ul>
<li class="chapter" data-level="14.1" data-path="visualiseerimine4.html"><a href="visualiseerimine4.html#euroopa-ja-maailma-andmed"><i class="fa fa-check"></i><b>14.1</b> Euroopa ja maailma andmed</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="visualiseerimine4.html"><a href="visualiseerimine4.html#koordinaatsüsteemid"><i class="fa fa-check"></i><b>14.1.1</b> Koordinaatsüsteemid</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="visualiseerimine4.html"><a href="visualiseerimine4.html#euroopa-riikide-ja-linnade-filtreerimine"><i class="fa fa-check"></i><b>14.2</b> Euroopa riikide ja linnade filtreerimine</a></li>
<li class="chapter" data-level="14.3" data-path="visualiseerimine4.html"><a href="visualiseerimine4.html#skpin-visualiseerimine"><i class="fa fa-check"></i><b>14.3</b> SKP/in visualiseerimine</a></li>
<li class="chapter" data-level="14.4" data-path="visualiseerimine4.html"><a href="visualiseerimine4.html#rastriga-katsetamine"><i class="fa fa-check"></i><b>14.4</b> Rastriga katsetamine</a></li>
<li class="chapter" data-level="14.5" data-path="visualiseerimine4.html"><a href="visualiseerimine4.html#järgmisel-korral-8"><i class="fa fa-check"></i><b>14.5</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="tekstianalyys.html"><a href="tekstianalyys.html"><i class="fa fa-check"></i><b>15</b> Geograafiline tekstianalüüs</a>
<ul>
<li class="chapter" data-level="15.1" data-path="tekstianalyys.html"><a href="tekstianalyys.html#sammud"><i class="fa fa-check"></i><b>15.1</b> Sammud</a></li>
<li class="chapter" data-level="15.2" data-path="tekstianalyys.html"><a href="tekstianalyys.html#näited"><i class="fa fa-check"></i><b>15.2</b> Näited</a></li>
<li class="chapter" data-level="15.3" data-path="tekstianalyys.html"><a href="tekstianalyys.html#ressursid"><i class="fa fa-check"></i><b>15.3</b> Ressursid</a></li>
<li class="chapter" data-level="15.4" data-path="tekstianalyys.html"><a href="tekstianalyys.html#ülesanded"><i class="fa fa-check"></i><b>15.4</b> Ülesanded</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="tekstianalyys.html"><a href="tekstianalyys.html#geoparserite-katsetamine"><i class="fa fa-check"></i><b>15.4.1</b> Geoparserite katsetamine</a></li>
<li class="chapter" data-level="15.4.2" data-path="tekstianalyys.html"><a href="tekstianalyys.html#kohanimede-tuvastamine"><i class="fa fa-check"></i><b>15.4.2</b> Kohanimede tuvastamine</a></li>
<li class="chapter" data-level="15.4.3" data-path="tekstianalyys.html"><a href="tekstianalyys.html#kohanimede-geokodeerimine"><i class="fa fa-check"></i><b>15.4.3</b> Kohanimede geokodeerimine</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="tekstianalyys.html"><a href="tekstianalyys.html#järgmisel-korral-9"><i class="fa fa-check"></i><b>15.5</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="tekstianalyys2.html"><a href="tekstianalyys2.html"><i class="fa fa-check"></i><b>16</b> Geograafiline tekstianalüüs 2</a>
<ul>
<li class="chapter" data-level="16.1" data-path="tekstianalyys2.html"><a href="tekstianalyys2.html#ülesanne-1-lihtne-teksti-meelsuse-analüüs"><i class="fa fa-check"></i><b>16.1</b> Ülesanne 1: lihtne teksti meelsuse analüüs</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="tekstianalyys2.html"><a href="tekstianalyys2.html#tekstikatkendite-meelsuse-tuvastamine"><i class="fa fa-check"></i><b>16.1.1</b> Tekstikatkendite meelsuse tuvastamine</a></li>
<li class="chapter" data-level="16.1.2" data-path="tekstianalyys2.html"><a href="tekstianalyys2.html#koordinaatide-lisamine-geokodeerimine"><i class="fa fa-check"></i><b>16.1.2</b> Koordinaatide lisamine (geokodeerimine)</a></li>
<li class="chapter" data-level="16.1.3" data-path="tekstianalyys2.html"><a href="tekstianalyys2.html#visualiseerimine-1"><i class="fa fa-check"></i><b>16.1.3</b> Visualiseerimine</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="tekstianalyys2.html"><a href="tekstianalyys2.html#ülesanne-2-lihtne-kollokatsioonide-analüüs"><i class="fa fa-check"></i><b>16.2</b> Ülesanne 2: lihtne kollokatsioonide analüüs</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="geostatistika1.html"><a href="geostatistika1.html"><i class="fa fa-check"></i><b>17</b> Geostatistika 1</a>
<ul>
<li class="chapter" data-level="17.1" data-path="geostatistika1.html"><a href="geostatistika1.html#punktimustri-analüüs"><i class="fa fa-check"></i><b>17.1</b> Punktimustri analüüs</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="geostatistika1.html"><a href="geostatistika1.html#punktitihedus"><i class="fa fa-check"></i><b>17.1.1</b> Punktitihedus</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="geostatistika1.html"><a href="geostatistika1.html#ülesanne-1-1"><i class="fa fa-check"></i><b>17.2</b> Ülesanne 1</a></li>
<li class="chapter" data-level="17.3" data-path="geostatistika1.html"><a href="geostatistika1.html#ruumiline-vastastikmõju"><i class="fa fa-check"></i><b>17.3</b> Ruumiline vastastikmõju</a></li>
<li class="chapter" data-level="17.4" data-path="geostatistika1.html"><a href="geostatistika1.html#ülesanne-2-1"><i class="fa fa-check"></i><b>17.4</b> Ülesanne 2</a></li>
<li class="chapter" data-level="17.5" data-path="geostatistika1.html"><a href="geostatistika1.html#järgmisel-korral-10"><i class="fa fa-check"></i><b>17.5</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="geostatistika2.html"><a href="geostatistika2.html"><i class="fa fa-check"></i><b>18</b> Geostatistika 2</a>
<ul>
<li class="chapter" data-level="18.1" data-path="geostatistika2.html"><a href="geostatistika2.html#asukohapõhised-kokkuvõtted"><i class="fa fa-check"></i><b>18.1</b> Asukohapõhised kokkuvõtted</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="geostatistika2.html"><a href="geostatistika2.html#ülesanne-1-2"><i class="fa fa-check"></i><b>18.1.1</b> Ülesanne 1</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="geostatistika2.html"><a href="geostatistika2.html#klasterdamine"><i class="fa fa-check"></i><b>18.2</b> Klasterdamine</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="geostatistika2.html"><a href="geostatistika2.html#ülesanne-2-2"><i class="fa fa-check"></i><b>18.2.1</b> Ülesanne 2</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="geostatistika2.html"><a href="geostatistika2.html#interpoleerimine"><i class="fa fa-check"></i><b>18.3</b> Interpoleerimine</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="geostatistika2.html"><a href="geostatistika2.html#distantsi-kaaluv-interpoleerimine"><i class="fa fa-check"></i><b>18.3.1</b> Distantsi kaaluv interpoleerimine</a></li>
<li class="chapter" data-level="18.3.2" data-path="geostatistika2.html"><a href="geostatistika2.html#spline"><i class="fa fa-check"></i><b>18.3.2</b> Spline</a></li>
<li class="chapter" data-level="18.3.3" data-path="geostatistika2.html"><a href="geostatistika2.html#ülesanne-3-1"><i class="fa fa-check"></i><b>18.3.3</b> Ülesanne 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="veebikaardid.html"><a href="veebikaardid.html"><i class="fa fa-check"></i><b>19</b> Veebikaardid</a>
<ul>
<li class="chapter" data-level="19.1" data-path="veebikaardid.html"><a href="veebikaardid.html#kaardikihid-qgisis"><i class="fa fa-check"></i><b>19.1</b> Kaardikihid QGISis</a></li>
<li class="chapter" data-level="19.2" data-path="veebikaardid.html"><a href="veebikaardid.html#veebikaartide-eksportimine"><i class="fa fa-check"></i><b>19.2</b> Veebikaartide eksportimine</a></li>
<li class="chapter" data-level="19.3" data-path="veebikaardid.html"><a href="veebikaardid.html#veebikaartide-majutamine"><i class="fa fa-check"></i><b>19.3</b> Veebikaartide majutamine</a></li>
<li class="chapter" data-level="19.4" data-path="veebikaardid.html"><a href="veebikaardid.html#lisa"><i class="fa fa-check"></i><b>19.4</b> Lisa</a></li>
<li class="chapter" data-level="19.5" data-path="veebikaardid.html"><a href="veebikaardid.html#järgmisel-korral-11"><i class="fa fa-check"></i><b>19.5</b> Järgmisel korral</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i><b>20</b> Ruumiandmete analüüs R-iga</a>
<ul>
<li class="chapter" data-level="20.1" data-path="r.html"><a href="r.html#pakettide-installimine"><i class="fa fa-check"></i><b>20.1</b> Pakettide installimine</a></li>
<li class="chapter" data-level="20.2" data-path="r.html"><a href="r.html#miks-teha-kaarte-koodipõhiselt"><i class="fa fa-check"></i><b>20.2</b> Miks teha kaarte koodipõhiselt?</a></li>
<li class="chapter" data-level="20.3" data-path="r.html"><a href="r.html#r-rstudio-ja-rmarkdown"><i class="fa fa-check"></i><b>20.3</b> R, Rstudio ja Rmarkdown</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="r.html"><a href="r.html#kood"><i class="fa fa-check"></i><b>20.3.1</b> Kood</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="r.html"><a href="r.html#joonised-ja-kaardid-r-is"><i class="fa fa-check"></i><b>20.4</b> Joonised ja kaardid R-is</a></li>
<li class="chapter" data-level="20.5" data-path="r.html"><a href="r.html#ruumiandmed"><i class="fa fa-check"></i><b>20.5</b> Ruumiandmed</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="r.html"><a href="r.html#andmete-avamine-2"><i class="fa fa-check"></i><b>20.5.1</b> Andmete avamine</a></li>
<li class="chapter" data-level="20.5.2" data-path="r.html"><a href="r.html#kaartide-tegemine"><i class="fa fa-check"></i><b>20.5.2</b> Kaartide tegemine</a></li>
<li class="chapter" data-level="20.5.3" data-path="r.html"><a href="r.html#andmete-filtreerimine"><i class="fa fa-check"></i><b>20.5.3</b> Andmete filtreerimine</a></li>
<li class="chapter" data-level="20.5.4" data-path="r.html"><a href="r.html#ülesanne-4"><i class="fa fa-check"></i><b>20.5.4</b> Ülesanne</a></li>
<li class="chapter" data-level="20.5.5" data-path="r.html"><a href="r.html#kaartide-eksportimine"><i class="fa fa-check"></i><b>20.5.5</b> Kaartide eksportimine</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="r.html"><a href="r.html#r-i-raamatud-ja-juhendid"><i class="fa fa-check"></i><b>20.6</b> R-i raamatud ja juhendid</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="r2.html"><a href="r2.html"><i class="fa fa-check"></i><b>21</b> Ruumiandmete analüüs R-iga 2</a>
<ul>
<li class="chapter" data-level="21.1" data-path="r2.html"><a href="r2.html#pakettide-laadimine-ja-andmete-töötlemine"><i class="fa fa-check"></i><b>21.1</b> Pakettide laadimine ja andmete töötlemine</a></li>
<li class="chapter" data-level="21.2" data-path="r2.html"><a href="r2.html#kasutajaliides"><i class="fa fa-check"></i><b>21.2</b> Kasutajaliides</a></li>
<li class="chapter" data-level="21.3" data-path="r2.html"><a href="r2.html#server"><i class="fa fa-check"></i><b>21.3</b> Server</a></li>
<li class="chapter" data-level="21.4" data-path="r2.html"><a href="r2.html#rakenduse-kokkupanemine"><i class="fa fa-check"></i><b>21.4</b> Rakenduse kokkupanemine</a></li>
<li class="chapter" data-level="21.5" data-path="r2.html"><a href="r2.html#rakenduse-jagamine"><i class="fa fa-check"></i><b>21.5</b> Rakenduse jagamine</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="kirjandus.html"><a href="kirjandus.html"><i class="fa fa-check"></i>Kirjandus</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HVHV.00.001 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r2" class="section level1" number="21">
<h1><span class="header-section-number">Praktikum 21</span> Ruumiandmete analüüs R-iga 2</h1>
<p>Eelmisel korral vaatasime, kuidas R-iga lihtsamaid kaarte teha. See hõlmas</p>
<ul>
<li>vajalike pakettide laadimist,<br />
</li>
<li>andmete sisselugemist,</li>
<li>andmete filtreerimist,<br />
</li>
<li>andmete visualiseerimist.</li>
</ul>
<p>Sel korral vaatame, kuidas teha R-is lihtsat veebirakendust, mis kuvaks kaarti vastavalt kasutaja valikutele. Siin tuleb osata pisut R-i (või juhendeid lugeda), aga mitte näiteks JavaScripti ega HTMLi.</p>
<p>R-is saab interaktiivsete rakenduste tegemiseks kasutada <strong><a href="https://shiny.rstudio.com/">Shiny</a></strong> paketti. Kui sinu RStudios ei ole veel Shiny võimalust, tuleb pakett esmalt installida.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r2.html#cb1-1" aria-hidden="true"></a><span class="co"># Trüki konsooli</span></span>
<span id="cb1-2"><a href="r2.html#cb1-2" aria-hidden="true"></a><span class="cf">if</span>(<span class="op">!</span><span class="st">&quot;shiny&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">rownames</span>(<span class="kw">installed.packages</span>())) <span class="kw">install.packages</span>(<span class="st">&quot;shiny&quot;</span>)</span>
<span id="cb1-3"><a href="r2.html#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="r2.html#cb1-4" aria-hidden="true"></a><span class="co"># Käsus kontrollitakse, kas shiny pakett sisaldub</span></span>
<span id="cb1-5"><a href="r2.html#cb1-5" aria-hidden="true"></a><span class="co"># installitud pakettide nimede hulgas</span></span>
<span id="cb1-6"><a href="r2.html#cb1-6" aria-hidden="true"></a><span class="co"># ning kui ei sisaldu (hüüumärki kasutatakse mingi tingimuse eitamiseks),</span></span>
<span id="cb1-7"><a href="r2.html#cb1-7" aria-hidden="true"></a><span class="co"># siis installi.</span></span></code></pre></div>
<p>Seejärel vali <strong><code>File</code> -&gt; <code>New File</code> -&gt; <code>Shiny Web App</code></strong>, anna oma rakendusele nimi (nt <em>kultuurimalestised</em> vmt) ning jäta rakenduse tüübi (<em>Application type</em>) valikuks <em>Single File</em>. See tähendab, et nii kasutajaliides (<em>ui</em> - see osa, mida kasutaja näeb ja mille abil rakendusega suhtleb) kui ka serveri loogika (<em>server</em> - see osa, mis vastavalt kasutaja valikutele tegelikult andmetega midagi teeb) on ühes R-i failis koos ning selle faili nimi on <em>app.R</em>.
<em>Multiple File</em> tähendaks, et ühes failis on kasutajaliidese osa ning teises serveri osa ning kui tahta rakendust kasutada, peavad olemas olema mõlemad failid.
Kasutuses kahel variandil praktiliselt vahet ei ole.</p>
<p>Vali ka kaust, milles tahad oma rakendust hoida. Selle kausta sisse tekib omakorda kaust sinu rakenduse nimega (nt <em>kultuurimalestised</em>), mille sees on fail <em>app.R</em> ja mille sisse võiksid minna ka kõik rakenduses kasutatavad failid (nt tabelandmestikud, <em>shapefile</em>’id, pildid jm).</p>
<p>Avaneb fail <strong><em>app.R</em></strong>, kus on juba valmis põhi, mille sisse saad oma rakendust kirjutada. Vaikimisi põhi on tehtud <a href="https://et.wikipedia.org/wiki/Histogramm">histogrammi</a> joonistamiseks. Vajuta rohelise noolekesega nupul <em>Run App</em>. Võid valida ka <em>Run in Viewer Pane</em>, et kuvada rakendust RStudio enda keskkonnas.
Kui tahad nüüd näha rakenduse endaga paralleelselt koodi, millega rakendus on tehtud, trüki konsooli <code>runExample("01_hello", display.mode = "showcase")</code>.</p>
<p>Rakenduse minimaalne nõutud struktuur koosneb neljast osast ning näeb välja selline (trellidega on tähistatud kommentaarid):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="r2.html#cb2-1" aria-hidden="true"></a><span class="co"># 1. Rakenduse töötamiseks vajaliku shiny paketi laadimine.</span></span>
<span id="cb2-2"><a href="r2.html#cb2-2" aria-hidden="true"></a><span class="co"># Siin saab sisse lugeda ka teised paketid,</span></span>
<span id="cb2-3"><a href="r2.html#cb2-3" aria-hidden="true"></a><span class="co"># vajalikud andmed ning neid andmeid vajadusel töödelda.</span></span>
<span id="cb2-4"><a href="r2.html#cb2-4" aria-hidden="true"></a><span class="kw">library</span>(shiny) </span>
<span id="cb2-5"><a href="r2.html#cb2-5" aria-hidden="true"></a></span>
<span id="cb2-6"><a href="r2.html#cb2-6" aria-hidden="true"></a><span class="co"># 2. Kasutajaliides</span></span>
<span id="cb2-7"><a href="r2.html#cb2-7" aria-hidden="true"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb2-8"><a href="r2.html#cb2-8" aria-hidden="true"></a>    <span class="co"># Siin saab defineerida, kuidas kasutajaliides välja näeb, sh</span></span>
<span id="cb2-9"><a href="r2.html#cb2-9" aria-hidden="true"></a>    <span class="co"># kus ja kuidas lasta kasutajal teha mingeid valikuid,</span></span>
<span id="cb2-10"><a href="r2.html#cb2-10" aria-hidden="true"></a>    <span class="co"># milliseid valikuid kasutaja teha saab </span></span>
<span id="cb2-11"><a href="r2.html#cb2-11" aria-hidden="true"></a>    <span class="co"># (nt filtreerida algandmetest mingeid andmeid, </span></span>
<span id="cb2-12"><a href="r2.html#cb2-12" aria-hidden="true"></a>    <span class="co"># muuta mingitel väljundi elementidel värvi, </span></span>
<span id="cb2-13"><a href="r2.html#cb2-13" aria-hidden="true"></a>    <span class="co"># kujundeid, teksti suurust, väljundit salvestada jne),</span></span>
<span id="cb2-14"><a href="r2.html#cb2-14" aria-hidden="true"></a>    <span class="co"># milline on kasutaja valikute põhjal genereeritud väljund </span></span>
<span id="cb2-15"><a href="r2.html#cb2-15" aria-hidden="true"></a>    <span class="co"># (nt kaart, tabel, joonis, tekst jne)</span></span>
<span id="cb2-16"><a href="r2.html#cb2-16" aria-hidden="true"></a>    <span class="co"># ja kus see paikneb.</span></span>
<span id="cb2-17"><a href="r2.html#cb2-17" aria-hidden="true"></a>    <span class="co"># fluidPage() teeb lehe, mis kohandub kasutaja brauseriakna suurusega,</span></span>
<span id="cb2-18"><a href="r2.html#cb2-18" aria-hidden="true"></a>    <span class="co"># fixedPage() teeb lehe, mis on vaikimisi 940 piksli laiune.</span></span>
<span id="cb2-19"><a href="r2.html#cb2-19" aria-hidden="true"></a>)</span>
<span id="cb2-20"><a href="r2.html#cb2-20" aria-hidden="true"></a></span>
<span id="cb2-21"><a href="r2.html#cb2-21" aria-hidden="true"></a><span class="co"># 3. Serveri loogika</span></span>
<span id="cb2-22"><a href="r2.html#cb2-22" aria-hidden="true"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</span>
<span id="cb2-23"><a href="r2.html#cb2-23" aria-hidden="true"></a>    <span class="co"># Siin saab defineerida, mida rakendus kasutaja valikute põhjal teeb </span></span>
<span id="cb2-24"><a href="r2.html#cb2-24" aria-hidden="true"></a>    <span class="co"># ning kuidas soovitud väljundini jõuda, </span></span>
<span id="cb2-25"><a href="r2.html#cb2-25" aria-hidden="true"></a>    <span class="co"># nt kui kasutaja valib A, siis tehakse väljund niisugustest andmetest,</span></span>
<span id="cb2-26"><a href="r2.html#cb2-26" aria-hidden="true"></a>    <span class="co"># kui kasutaja valib B, siis tehakse väljund naasugustest andmetest jne.</span></span>
<span id="cb2-27"><a href="r2.html#cb2-27" aria-hidden="true"></a>}</span>
<span id="cb2-28"><a href="r2.html#cb2-28" aria-hidden="true"></a></span>
<span id="cb2-29"><a href="r2.html#cb2-29" aria-hidden="true"></a><span class="co"># 4. Rakenduse kokkupanemine</span></span>
<span id="cb2-30"><a href="r2.html#cb2-30" aria-hidden="true"></a><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</span></code></pre></div>
<p>Vaatame nüüd rakenduse struktuuri lähemalt ning teeme ise ühe lihtsa rakenduse, mis</p>
<ul>
<li>võtaks sisendiks failid <strong><em>maakond_20201001.shp</em></strong> (polügoonid) ja <strong><em>kultuurimalestised.shp</em></strong> (punktid),</li>
<li>laseks kasutajal valida, millist liiki mälestisi (ajalugu, arheoloogia, arhitektuur, kunst) punktidena kuvada ning millist piirkonda näidata (tervet Eestit või konkreetset maakonda).</li>
</ul>
<p>Võid kasutada vaikimisi avatud rakenduse malli, ent kustuta sel juhul ära kommentaarid ning <em>ui</em>- ja <em>server</em>-funktsioonide sisu.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r2.html#cb3-1" aria-hidden="true"></a><span class="kw">library</span>(shiny)</span>
<span id="cb3-2"><a href="r2.html#cb3-2" aria-hidden="true"></a></span>
<span id="cb3-3"><a href="r2.html#cb3-3" aria-hidden="true"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>()</span>
<span id="cb3-4"><a href="r2.html#cb3-4" aria-hidden="true"></a></span>
<span id="cb3-5"><a href="r2.html#cb3-5" aria-hidden="true"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){}</span>
<span id="cb3-6"><a href="r2.html#cb3-6" aria-hidden="true"></a></span>
<span id="cb3-7"><a href="r2.html#cb3-7" aria-hidden="true"></a><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</span></code></pre></div>
<p>Aseta rakenduse kausta (kus on ka fail <em>app.R</em>) ka vajalikud failid (<em>maakond_20201001.shp</em> ja <em>kultuurimalestised.shp</em>).</p>
<div id="pakettide-laadimine-ja-andmete-töötlemine" class="section level2" number="21.1">
<h2><span class="header-section-number">21.1</span> Pakettide laadimine ja andmete töötlemine</h2>
<p>Kõigepealt võiks faili päisesse lisada kommentaarid (kõik #-märkidega read on kommentaarid) selle kohta, mida rakendus teeb, milliseid faile ja pakette kasutab ning kes ja millal on rakenduse teinud. Kommentaarid rakenduses kuskil näha ei jää ega ole sisuliselt olulised, seega võib need ka ära kustutada.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="r2.html#cb4-1" aria-hidden="true"></a><span class="co"># See rakendus kuvab veebikaardi kultuurimälestistest.</span></span>
<span id="cb4-2"><a href="r2.html#cb4-2" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb4-3"><a href="r2.html#cb4-3" aria-hidden="true"></a><span class="co"># Rakenduse sisendfailideks on</span></span>
<span id="cb4-4"><a href="r2.html#cb4-4" aria-hidden="true"></a><span class="co"># maakond_20201001.shp ja kultuurimalestised.shp.</span></span>
<span id="cb4-5"><a href="r2.html#cb4-5" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb4-6"><a href="r2.html#cb4-6" aria-hidden="true"></a><span class="co"># Rakendus kasutab pakette shiny, sf ja tidyverse (sh ggplot2).</span></span>
<span id="cb4-7"><a href="r2.html#cb4-7" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb4-8"><a href="r2.html#cb4-8" aria-hidden="true"></a><span class="co"># Maarja-Liisa Pilvik</span></span>
<span id="cb4-9"><a href="r2.html#cb4-9" aria-hidden="true"></a><span class="co"># 7.12.2020</span></span></code></pre></div>
<p>Järgmiseks laaditakse rakenduse töötamiseks vajalikud paketid. Kuna vaikimisi avaneval rakendusel pole aimugi, mida rakendusega päriselt tegema hakatakse, on tema ainukeseks nõudeks see, et <em>shiny</em> pakett oleks installitud ja laaditud.<br />
Meie laadime lisaks <code>shiny</code>-paketile ka paketid <code>sf</code> ja <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="r2.html#cb5-1" aria-hidden="true"></a><span class="co"># 1. Laadime paketid ja loeme sisse andmed ----</span></span>
<span id="cb5-2"><a href="r2.html#cb5-2" aria-hidden="true"></a><span class="kw">library</span>(shiny) <span class="co"># vajalik rakenduse töötamiseks</span></span>
<span id="cb5-3"><a href="r2.html#cb5-3" aria-hidden="true"></a><span class="kw">library</span>(sf) <span class="co"># vajalik ruumiandmete sisselugemiseks ja analüüsiks</span></span>
<span id="cb5-4"><a href="r2.html#cb5-4" aria-hidden="true"></a><span class="kw">library</span>(tidyverse) <span class="co"># sisaldab paketti ggplot2 (visualiseerimiseks) ning </span></span>
<span id="cb5-5"><a href="r2.html#cb5-5" aria-hidden="true"></a><span class="co"># dplyr ja tidyr (andmetöötluseks)</span></span></code></pre></div>
<p>Loeme sisse ka rakenduses kasutatavad andmed ning töötleme neid selleks, et saada sobivam failistruktuur.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="r2.html#cb6-1" aria-hidden="true"></a><span class="co"># Loeme andmestikud sisse (las need olla rakenduse kaustas).</span></span>
<span id="cb6-2"><a href="r2.html#cb6-2" aria-hidden="true"></a>maakonnad  =<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;maakond_20201001.shp&quot;</span>)</span>
<span id="cb6-3"><a href="r2.html#cb6-3" aria-hidden="true"></a>malestised =<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;kultuurimalestised.shp&quot;</span>)</span>
<span id="cb6-4"><a href="r2.html#cb6-4" aria-hidden="true"></a></span>
<span id="cb6-5"><a href="r2.html#cb6-5" aria-hidden="true"></a><span class="co"># Teeme kultuurimälestiste laiast tabelist </span></span>
<span id="cb6-6"><a href="r2.html#cb6-6" aria-hidden="true"></a><span class="co"># (mälestiste liigid eraldi tulpades, st KUNST: Y-N, ARHITEKTUUR: Y-N jne) </span></span>
<span id="cb6-7"><a href="r2.html#cb6-7" aria-hidden="true"></a><span class="co"># samanimelise pika tabeli, kus oleks </span></span>
<span id="cb6-8"><a href="r2.html#cb6-8" aria-hidden="true"></a><span class="co"># ainult üks tulp mälestiste liikidega (LIIK: KUNST, ARHITEKTUUR, ...).</span></span>
<span id="cb6-9"><a href="r2.html#cb6-9" aria-hidden="true"></a>malestised &lt;-<span class="st"> </span><span class="kw">gather</span>(malestised, <span class="co"># andmestik, mida muuta</span></span>
<span id="cb6-10"><a href="r2.html#cb6-10" aria-hidden="true"></a>                     <span class="dt">key =</span> LIIK, <span class="co"># vanade tulpade nimed uude tulpa LIIK</span></span>
<span id="cb6-11"><a href="r2.html#cb6-11" aria-hidden="true"></a>                     <span class="dt">value =</span> yesno, <span class="co"># vanade tulpade väärtused uude tulpa yesno</span></span>
<span id="cb6-12"><a href="r2.html#cb6-12" aria-hidden="true"></a>                     AJALUGU<span class="op">:</span>KUNST) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># vanad tulbad ise</span></span>
<span id="cb6-13"><a href="r2.html#cb6-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(yesno <span class="op">==</span><span class="st"> &quot;Y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># jäta alles ainult read, kus yesno väärtus on &quot;Y&quot;</span></span>
<span id="cb6-14"><a href="r2.html#cb6-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>yesno) <span class="co"># seejärel viska yesno tulp andmestikust välja</span></span>
<span id="cb6-15"><a href="r2.html#cb6-15" aria-hidden="true"></a></span>
<span id="cb6-16"><a href="r2.html#cb6-16" aria-hidden="true"></a><span class="co"># Muudame mälestiste liikide väärtused (nt ARHEOLOOGI) ilusamaks (nt Arheoloogia).</span></span>
<span id="cb6-17"><a href="r2.html#cb6-17" aria-hidden="true"></a>malestised<span class="op">$</span>LIIK &lt;-<span class="st"> </span><span class="kw">recode</span>(malestised<span class="op">$</span>LIIK, <span class="co"># muudame tulpa &quot;LIIK&quot;</span></span>
<span id="cb6-18"><a href="r2.html#cb6-18" aria-hidden="true"></a>                          <span class="dt">AJALUGU =</span> <span class="st">&quot;Ajalugu&quot;</span>, </span>
<span id="cb6-19"><a href="r2.html#cb6-19" aria-hidden="true"></a>                          <span class="dt">ARHEOLOOGI =</span> <span class="st">&quot;Arheoloogia&quot;</span>, </span>
<span id="cb6-20"><a href="r2.html#cb6-20" aria-hidden="true"></a>                          <span class="dt">ARHITEKTUU =</span> <span class="st">&quot;Arhitektuur&quot;</span>, </span>
<span id="cb6-21"><a href="r2.html#cb6-21" aria-hidden="true"></a>                          <span class="dt">KUNST =</span> <span class="st">&quot;Kunst&quot;</span>)</span></code></pre></div>
</div>
<div id="kasutajaliides" class="section level2" number="21.2">
<h2><span class="header-section-number">21.2</span> Kasutajaliides</h2>
<p>Edasi tuleb kasutajaliidese (<em>ui</em>) osa, mis määrab ära selle, kuidas kasutaja rakendust näeb. Kasutajaliides moodustub hierarhilistest funktsioonidest (funktsioonid tähistatud sulgudega, mille sees täpsustatakse funktsioonide argumente).<br />
Meie teeme lihtsa kasutajaliidese, kus on</p>
<ul>
<li>rakenduse pealkiri;</li>
<li>külgribamenüü, kus saab valida
<ul>
<li>märkeruutudega menüüs kuvatavate mälestiste liigid,</li>
<li>rippmenüüs maakonna, kuhu kaardil sisse suumida;</li>
</ul></li>
<li>väljundi ala, kus näidatakse kasutaja valikutest sõltuvalt kaarti.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="r2.html#cb7-1" aria-hidden="true"></a><span class="co"># 2. Defineerime kasutajaliidese (user interface ehk ui) ----</span></span>
<span id="cb7-2"><a href="r2.html#cb7-2" aria-hidden="true"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>( <span class="co"># vaade, mis kohandub kasutaja brauseriakna suurusega</span></span>
<span id="cb7-3"><a href="r2.html#cb7-3" aria-hidden="true"></a>    </span>
<span id="cb7-4"><a href="r2.html#cb7-4" aria-hidden="true"></a>    <span class="co"># Rakenduse pealkiri</span></span>
<span id="cb7-5"><a href="r2.html#cb7-5" aria-hidden="true"></a>    <span class="kw">titlePanel</span>(<span class="st">&quot;Eesti kultuurimälestised&quot;</span>),</span>
<span id="cb7-6"><a href="r2.html#cb7-6" aria-hidden="true"></a>    </span>
<span id="cb7-7"><a href="r2.html#cb7-7" aria-hidden="true"></a>    <span class="co"># Valime vaates sellise elementide paigutuse,</span></span>
<span id="cb7-8"><a href="r2.html#cb7-8" aria-hidden="true"></a>    <span class="co"># mis koosneb külgrgibamenüüst ja väljundist</span></span>
<span id="cb7-9"><a href="r2.html#cb7-9" aria-hidden="true"></a>    <span class="kw">sidebarLayout</span>(</span>
<span id="cb7-10"><a href="r2.html#cb7-10" aria-hidden="true"></a>        <span class="co"># külgribamenüüs on</span></span>
<span id="cb7-11"><a href="r2.html#cb7-11" aria-hidden="true"></a>        <span class="kw">sidebarPanel</span>( </span>
<span id="cb7-12"><a href="r2.html#cb7-12" aria-hidden="true"></a>            <span class="kw">checkboxGroupInput</span>( <span class="co"># märkeruutudega menüü, kus:</span></span>
<span id="cb7-13"><a href="r2.html#cb7-13" aria-hidden="true"></a>                <span class="dt">inputId =</span> <span class="st">&quot;liik&quot;</span>, <span class="co"># suvaline nimi, millega menüüd tähistada</span></span>
<span id="cb7-14"><a href="r2.html#cb7-14" aria-hidden="true"></a>                <span class="dt">label =</span> <span class="st">&quot;Vali mälestiste liik&quot;</span>, <span class="co"># kuvatav juhendtekst</span></span>
<span id="cb7-15"><a href="r2.html#cb7-15" aria-hidden="true"></a>                <span class="dt">choices =</span> <span class="kw">unique</span>(malestised<span class="op">$</span>LIIK)), <span class="co"># liigid ise</span></span>
<span id="cb7-16"><a href="r2.html#cb7-16" aria-hidden="true"></a>            <span class="kw">selectInput</span>( <span class="co"># rippmenüü,kus: </span></span>
<span id="cb7-17"><a href="r2.html#cb7-17" aria-hidden="true"></a>                <span class="dt">inputId =</span> <span class="st">&quot;maakond&quot;</span>, <span class="co"># suvaline nimi, millega menüüd tähistada</span></span>
<span id="cb7-18"><a href="r2.html#cb7-18" aria-hidden="true"></a>                <span class="dt">label =</span> <span class="st">&quot;Vali maakond&quot;</span>, <span class="co"># kuvatav juhendtekst</span></span>
<span id="cb7-19"><a href="r2.html#cb7-19" aria-hidden="true"></a>                <span class="dt">choices =</span> <span class="kw">c</span>(<span class="kw">unique</span>(maakonnad<span class="op">$</span>MNIMI), <span class="st">&quot;Kõik maakonnad&quot;</span>), <span class="co"># maakonnad</span></span>
<span id="cb7-20"><a href="r2.html#cb7-20" aria-hidden="true"></a>                <span class="dt">selected =</span> <span class="st">&quot;Kõik maakonnad&quot;</span>, <span class="co"># vaikimisi valitud kõik</span></span>
<span id="cb7-21"><a href="r2.html#cb7-21" aria-hidden="true"></a>                <span class="dt">multiple =</span> <span class="ot">FALSE</span>)), <span class="co"># mitut korraga valida ei saa</span></span>
<span id="cb7-22"><a href="r2.html#cb7-22" aria-hidden="true"></a>            </span>
<span id="cb7-23"><a href="r2.html#cb7-23" aria-hidden="true"></a>        <span class="co"># väljundiks on</span></span>
<span id="cb7-24"><a href="r2.html#cb7-24" aria-hidden="true"></a>        <span class="kw">mainPanel</span>( </span>
<span id="cb7-25"><a href="r2.html#cb7-25" aria-hidden="true"></a>            <span class="kw">plotOutput</span>( <span class="co"># joonis, kus:</span></span>
<span id="cb7-26"><a href="r2.html#cb7-26" aria-hidden="true"></a>                <span class="dt">outputId =</span> <span class="st">&quot;kaart&quot;</span>)) <span class="co"># suvaline nimi, millega joonist tähistada</span></span>
<span id="cb7-27"><a href="r2.html#cb7-27" aria-hidden="true"></a>        )</span>
<span id="cb7-28"><a href="r2.html#cb7-28" aria-hidden="true"></a>)</span></code></pre></div>
</div>
<div id="server" class="section level2" number="21.3">
<h2><span class="header-section-number">21.3</span> Server</h2>
<p>Järgmiseks defineerime selle, mis juhtub, kui kasutaja mingeid valikuid teeb.
Teeme nii, et rakenduse avamisel kuvatakse kasutajale lihtsalt ilma mälestisteta Eesti maakondade kaarti ning kaarti uuendatakse vastavalt sellele, millised andmed (kultuurimälestiste liigid) valitakse, ning millisesse piirkonda tahetakse sisse suumida.</p>
<p>Kasutajaliidese <code>Input</code>-klassi elementidele viidatakse serveriosas dollarimärgi ja omistatud id-ga kujul <code>input$...</code> (nt <code>input$liik</code> või <code>input$maakond</code>). <code>Output</code>-klassi elementidele kujul <code>output$...</code> (nt <code>output$kaart</code>).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="r2.html#cb8-1" aria-hidden="true"></a><span class="co"># 3. Defineerime serveri loogika ehk selle, mida rakendus teeb ----</span></span>
<span id="cb8-2"><a href="r2.html#cb8-2" aria-hidden="true"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</span>
<span id="cb8-3"><a href="r2.html#cb8-3" aria-hidden="true"></a>    </span>
<span id="cb8-4"><a href="r2.html#cb8-4" aria-hidden="true"></a>    <span class="co"># Kasutajaliidese väljundi (output) koha peale &#39;kaart&#39;</span></span>
<span id="cb8-5"><a href="r2.html#cb8-5" aria-hidden="true"></a>    output<span class="op">$</span>kaart &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({ <span class="co"># tehakse joonis,</span></span>
<span id="cb8-6"><a href="r2.html#cb8-6" aria-hidden="true"></a>        </span>
<span id="cb8-7"><a href="r2.html#cb8-7" aria-hidden="true"></a>        <span class="co"># mille sisendandmed sõltuvad kasutaja valikutest</span></span>
<span id="cb8-8"><a href="r2.html#cb8-8" aria-hidden="true"></a>        <span class="co"># mälestiste kihil</span></span>
<span id="cb8-9"><a href="r2.html#cb8-9" aria-hidden="true"></a>        andmed &lt;-<span class="st"> </span><span class="kw">filter</span>(malestised, <span class="co"># filtreeri mälestistest need read, kus</span></span>
<span id="cb8-10"><a href="r2.html#cb8-10" aria-hidden="true"></a>                         LIIK <span class="op">%in%</span><span class="st"> </span>input<span class="op">$</span>liik) <span class="co"># liik vastab kasutaja valikutele</span></span>
<span id="cb8-11"><a href="r2.html#cb8-11" aria-hidden="true"></a>        </span>
<span id="cb8-12"><a href="r2.html#cb8-12" aria-hidden="true"></a>        <span class="co"># ja suumimine sõltub kasutaja valikutest </span></span>
<span id="cb8-13"><a href="r2.html#cb8-13" aria-hidden="true"></a>        <span class="co"># maakondade kihil</span></span>
<span id="cb8-14"><a href="r2.html#cb8-14" aria-hidden="true"></a>        suum &lt;-<span class="st"> </span><span class="cf">if</span>(input<span class="op">$</span>maakond <span class="op">==</span><span class="st"> &quot;Kõik maakonnad&quot;</span>) <span class="co"># kui valitud on kõik</span></span>
<span id="cb8-15"><a href="r2.html#cb8-15" aria-hidden="true"></a>                  <span class="kw">st_bbox</span>(maakonnad) <span class="co"># siis võta terve maakondade kihi piirid</span></span>
<span id="cb8-16"><a href="r2.html#cb8-16" aria-hidden="true"></a>                <span class="cf">else</span> <span class="co"># vastasel juhul</span></span>
<span id="cb8-17"><a href="r2.html#cb8-17" aria-hidden="true"></a>                  <span class="kw">st_bbox</span>(maakonnad <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># võta piirid ainult</span></span>
<span id="cb8-18"><a href="r2.html#cb8-18" aria-hidden="true"></a><span class="st">                          </span><span class="kw">filter</span>(MNIMI <span class="op">==</span><span class="st"> </span>input<span class="op">$</span>maakond)) <span class="co"># valitud maakonnast</span></span>
<span id="cb8-19"><a href="r2.html#cb8-19" aria-hidden="true"></a>        </span>
<span id="cb8-20"><a href="r2.html#cb8-20" aria-hidden="true"></a>        </span>
<span id="cb8-21"><a href="r2.html#cb8-21" aria-hidden="true"></a>        <span class="co"># Kui sisendandmed ja suumi tase valitud, tee ggplotiga joonis, kus</span></span>
<span id="cb8-22"><a href="r2.html#cb8-22" aria-hidden="true"></a>        <span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb8-23"><a href="r2.html#cb8-23" aria-hidden="true"></a><span class="st">            </span><span class="co"># on alati maakondade kiht (ei sõltu kasutaja valikutest)</span></span>
<span id="cb8-24"><a href="r2.html#cb8-24" aria-hidden="true"></a><span class="st">            </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> maakonnad) <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-25"><a href="r2.html#cb8-25" aria-hidden="true"></a><span class="st">            </span><span class="co"># ning mälestiste kiht (sõltub kasutaja valikutest)</span></span>
<span id="cb8-26"><a href="r2.html#cb8-26" aria-hidden="true"></a><span class="st">            </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> andmed, <span class="co"># valikutest tulenevad andmed</span></span>
<span id="cb8-27"><a href="r2.html#cb8-27" aria-hidden="true"></a>                    <span class="kw">aes</span>(<span class="dt">shape =</span> LIIK, <span class="dt">color =</span> LIIK), <span class="co"># kuju ja värv liigi järgi</span></span>
<span id="cb8-28"><a href="r2.html#cb8-28" aria-hidden="true"></a>                    <span class="dt">alpha =</span> <span class="fl">0.3</span>, <span class="co"># punktide väljapaistvus 30%</span></span>
<span id="cb8-29"><a href="r2.html#cb8-29" aria-hidden="true"></a>                    <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="co"># punktide suurus 3</span></span>
<span id="cb8-30"><a href="r2.html#cb8-30" aria-hidden="true"></a><span class="st">            </span><span class="co"># suumi sisse vastavalt kasutaja valikutele maakondade sisendis</span></span>
<span id="cb8-31"><a href="r2.html#cb8-31" aria-hidden="true"></a><span class="st">            </span><span class="kw">coord_sf</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(suum[<span class="st">&quot;xmin&quot;</span>], suum[<span class="st">&quot;xmax&quot;</span>]),</span>
<span id="cb8-32"><a href="r2.html#cb8-32" aria-hidden="true"></a>                     <span class="dt">ylim =</span> <span class="kw">c</span>(suum[<span class="st">&quot;ymin&quot;</span>], suum[<span class="st">&quot;ymax&quot;</span>])) <span class="op">+</span></span>
<span id="cb8-33"><a href="r2.html#cb8-33" aria-hidden="true"></a><span class="st">            </span><span class="co"># lisa kaardile pealkiri vastava maakonna nimega</span></span>
<span id="cb8-34"><a href="r2.html#cb8-34" aria-hidden="true"></a><span class="st">            </span><span class="kw">labs</span>(<span class="dt">title =</span> input<span class="op">$</span>maakond) <span class="op">+</span></span>
<span id="cb8-35"><a href="r2.html#cb8-35" aria-hidden="true"></a><span class="st">            </span><span class="co"># kuva kaarti mustvalge teemaga</span></span>
<span id="cb8-36"><a href="r2.html#cb8-36" aria-hidden="true"></a><span class="st">            </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb8-37"><a href="r2.html#cb8-37" aria-hidden="true"></a><span class="st">            </span><span class="co"># aseta legend kaardi alla</span></span>
<span id="cb8-38"><a href="r2.html#cb8-38" aria-hidden="true"></a><span class="st">            </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span>
<span id="cb8-39"><a href="r2.html#cb8-39" aria-hidden="true"></a>    })</span>
<span id="cb8-40"><a href="r2.html#cb8-40" aria-hidden="true"></a>    </span>
<span id="cb8-41"><a href="r2.html#cb8-41" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div id="rakenduse-kokkupanemine" class="section level2" number="21.4">
<h2><span class="header-section-number">21.4</span> Rakenduse kokkupanemine</h2>
<p>Kõige lõpuks on vaja rakendus kasutajaliidesest ja serverist kokku panna.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="r2.html#cb9-1" aria-hidden="true"></a><span class="co"># 4. Paneme rakenduse kokku ----</span></span>
<span id="cb9-2"><a href="r2.html#cb9-2" aria-hidden="true"></a><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</span></code></pre></div>
<p>Jooksutame rakendust ning vaatame, mis saab.</p>
<p>Meie rakendus teeb oma töö ära, ent on nii kujunduselt kui ka kasutusmugavuse mõttes üsna algeline. Shinys saab aga muuta ja lisada veel lugematul hulgal asju, parandada rakenduse kiirust jne. Hea samm-sammulise sissejuhatuse rakenduste tegemisse leiab <a href="https://shiny.rstudio.com/tutorial/#written-tutorials">siit</a>.</p>
</div>
<div id="rakenduse-jagamine" class="section level2" number="21.5">
<h2><span class="header-section-number">21.5</span> Rakenduse jagamine</h2>
<p>Shiny rakendusi saab jagada ainult kas lokaalselt (<em>app.R</em> + selle juurde kuuluvad failid) või üles laadituna serverisse, kuhu on installitud ka R ja <em><a href="https://rstudio.com/products/shiny/download-server/">Shiny Server</a></em> (viimast saab installida ainult Linuxis). See tähendab, et tavalist HTML-faili Shiny rakendusest otse teha ei saa, sest JavaScript ei tea, mida R-i kooditükkidega pihta hakata.
Küll aga saab rakenduse üles laadida näiteks <strong><em><a href="https://www.shinyapps.io/">shinyapps.io</a></em></strong> serverisse ning lisada rakendus seejärel <em>iframe</em>’i abil mõne teise (HTMLis) veebilehe sisse.
<em>Shinyapps.io</em> pakub Shiny rakenduste majutuse teenust, kusjuures tasuta saab üles laadida kuni 5 rakendust ja neid ei tohi serveris ühes kuus aktiivselt kasutada rohkem kui 25 tundi.</p>
<p>Rakenduse laadimiseks serverisse tuleb esmalt teha endale <em>shinyapps.io</em> kasutaja, logida sisse ning valida seejärel <em>Account</em> -&gt; <em>Tokens</em>.
Samal ajal installi endale R-is pakett <code>rsconnect</code> ja laadi see.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="r2.html#cb10-1" aria-hidden="true"></a><span class="kw">install.packages</span>(<span class="st">&quot;rsconnect&quot;</span>)</span>
<span id="cb10-2"><a href="r2.html#cb10-2" aria-hidden="true"></a><span class="kw">library</span>(rsconnect)</span></code></pre></div>
<p>Nüüd vali <em>shinyapps.io</em> lehel <em>Tokens</em> alamlehel <em>Show</em> -&gt; <em>Copy to clipboard</em>, kopeeri esitatud kood ning tee RStudio konsoolis paremklikk -&gt; <em>Paste</em> või vajuta <em>Ctrl+V</em>. Nii ühendad lokaalselt installitud R-i ja enda kasutaja <em>shinyapps.io</em> serveris.</p>
<p>Rakenduse üleslaadimiseks trüki konsooli <code>deployApp()</code> ning anna argumendiks selle kausta teekond, kus rakendus on (juhul, kui rakendus on kaustas, mida näitab funktsioon <code>getwd()</code>, piisab lihtsalt kausta nimest).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="r2.html#cb11-1" aria-hidden="true"></a><span class="kw">deployApp</span>(<span class="st">&quot;kultuurimalestised&quot;</span>)</span></code></pre></div>
<p>Selle tulemusel avaneb lõpuks lehekülg <code>https://sinukasutajanimi.shinyapps.io/rakendusenimi/</code>.<br />
Vaata täpsemalt <a href="https://shiny.rstudio.com/articles/shinyapps.html">siit</a>.</p>
<p>Üles laaditud rakenduse saab panna <em>iframe</em>-i abil HTML-faili.
Näiteks siin on ülalpool tehtud rakendus:</p>
<iframe src="https://vallakohtudmorf.shinyapps.io/kultuurimalestised/" width="100%" height="500" style="border:none;">
</iframe>
<p>Vaata rohkem näiteid <a href="https://shiny.rstudio.com/gallery/">siit</a>.</p>


</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="kirjandus.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["book.pdf", "PDF"], ["book.epub", "EPUB"]],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

</body>

</html>
